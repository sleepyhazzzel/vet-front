import{a0 as N,a3 as I,a5 as P,a6 as l,h as e,aa as a,ar as T,an as v,G as L,V as z,ab as M,aj as D,r as R,Z as O,$ as Z,_ as H,a1 as J,c as K,a4 as Q,as as q,a8 as X,ak as Y,ah as ee,ai as ae,ag as le}from"./index-7e3ad466.js";import{v as B,V as se,a as F,b as oe,c as $}from"./index-9b5d208f.js";import{d as te}from"./index-79c3afef.js";import{c as W,a as c,b as re,u as A,d as p}from"./index.esm-ab988d0f.js";import{v as ue}from"./vue-the-mask-17035de2.js";import{V as j}from"./VForm-14b6551d.js";import{V as E}from"./VRow-9aa4da94.js";import{V as n}from"./VCol-e861b143.js";import{V as ne}from"./VSelect-2182f2f6.js";import{V as k}from"./VContainer-2f1a9339.js";import{V as ie}from"./VCheckbox-f7497ae3.js";import"./VList-55171a1c.js";const de={__name:"RegisterView",emits:[""],setup(_,{emit:r}){const{api:x}=D(),w=N(),h=W({user_name:c().required("姓名為必填欄位"),honorific:c().required("稱謂為必填欄位"),national_id:c().required("身分證為必填欄位").test("isNI","身分證格式錯誤",s=>te.isNationalIdentificationNumberValid(s)),email:c().required("信箱為必填欄位").test("isEmail","信箱格式錯誤",s=>B.isEmail(s)),phone:c().required("手機號碼為必填欄位").test("isPhone","手機號碼格式錯誤",s=>(s=s.replace(/-/g,""),B.isMobilePhone(s,"zh-TW"))),password:c().required("密碼為必填欄位").min(6,"密碼長度過短").max(20,"密碼長度過長"),passwordConfirm:c().required("密碼為必填欄位").min(6,"密碼長度過短").max(20,"密碼長度過長").oneOf([re("password")],"密碼不一致")}),{handleSubmit:C,isSubmitting:f}=A({validationSchema:h}),i=p("user_name"),y=p("honorific"),g=p("national_id"),b=p("email"),S=p("phone"),d=p("password"),u=p("passwordConfirm"),m=r,V=C(async s=>{var o,t;try{s.phone=s.phone.replace(/-/g,""),await x.post("/users",{user_name:s.user_name,honorific:s.honorific,national_id:s.national_id,email:s.email,phone:s.phone,password:s.password}),m("submitForm"),w({text:"註冊成功",showCloseButton:!1,snackbarProps:{timeout:2e3,color:"success",location:"bottom"}})}catch(U){console.log(U);const G=((t=(o=U==null?void 0:U.response)==null?void 0:o.data)==null?void 0:t.message)||"發生錯誤，請稍後再試";w({text:G,showCloseButton:!1,snackbarProps:{timeout:2e3,color:"error",location:"bottom"}})}});return(s,o)=>(I(),P(k,null,{default:l(()=>[e(j,{disabled:a(f),onSubmit:T(a(V),["prevent"])},{default:l(()=>[e(E,null,{default:l(()=>[e(n,{cols:"12",sm:"6",class:"py-0"},{default:l(()=>[e(v,{label:"姓名",type:"text",color:"teal",variant:"solo-filled",flat:"",rounded:"lg",modelValue:a(i).value.value,"onUpdate:modelValue":o[0]||(o[0]=t=>a(i).value.value=t),"error-messages":a(i).errorMessage.value},null,8,["modelValue","error-messages"])]),_:1}),e(n,{cols:"12",sm:"6",class:"py-0"},{default:l(()=>[e(ne,{label:"稱謂",items:["先生","女士"],color:"teal",variant:"solo-filled",flat:"",rounded:"lg",modelValue:a(y).value.value,"onUpdate:modelValue":o[1]||(o[1]=t=>a(y).value.value=t),"error-messages":a(y).errorMessage.value},null,8,["modelValue","error-messages"])]),_:1}),e(n,{cols:"12",class:"py-0"},{default:l(()=>[e(v,{label:"身分證字號",type:"text",color:"teal",variant:"solo-filled",flat:"",rounded:"lg",modelValue:a(g).value.value,"onUpdate:modelValue":o[2]||(o[2]=t=>a(g).value.value=t),"error-messages":a(g).errorMessage.value},null,8,["modelValue","error-messages"])]),_:1}),e(n,{cols:"12",class:"py-0"},{default:l(()=>[e(v,{label:"電子信箱",type:"email",color:"teal",variant:"solo-filled",flat:"",rounded:"lg",modelValue:a(b).value.value,"onUpdate:modelValue":o[3]||(o[3]=t=>a(b).value.value=t),"error-messages":a(b).errorMessage.value},null,8,["modelValue","error-messages"])]),_:1}),e(n,{cols:"12",class:"py-0"},{default:l(()=>[L(e(v,{label:"手機號碼",type:"tel",color:"teal",variant:"solo-filled",flat:"",rounded:"lg",modelValue:a(S).value.value,"onUpdate:modelValue":o[4]||(o[4]=t=>a(S).value.value=t),"error-messages":a(S).errorMessage.value},null,8,["modelValue","error-messages"]),[[a(ue.mask),"####-###-###"]])]),_:1}),e(n,{cols:"12",sm:"6",class:"py-0"},{default:l(()=>[e(v,{label:"密碼",type:"password",color:"teal",variant:"solo-filled",flat:"",rounded:"lg",hint:"密碼長度：6 - 20",minlength:"6",maxlength:"20",counter:"",modelValue:a(d).value.value,"onUpdate:modelValue":o[5]||(o[5]=t=>a(d).value.value=t),"error-messages":a(d).errorMessage.value},null,8,["modelValue","error-messages"])]),_:1}),e(n,{cols:"12",sm:"6",class:"py-0"},{default:l(()=>[e(v,{label:"確認密碼",type:"password",color:"teal",variant:"solo-filled",flat:"",rounded:"lg",minlength:"6",maxlength:"20",counter:"",modelValue:a(u).value.value,"onUpdate:modelValue":o[6]||(o[6]=t=>a(u).value.value=t),"error-messages":a(u).errorMessage.value},null,8,["modelValue","error-messages"])]),_:1}),e(n,{cols:"12"},{default:l(()=>[e(z,{type:"submit",color:"teal",block:"",rounded:"",size:"large",flat:""},{default:l(()=>[M("註冊")]),_:1})]),_:1})]),_:1})]),_:1},8,["disabled","onSubmit"])]),_:1}))}},me={__name:"LoginView",setup(_){const r=R(!1),{api:x}=D(),w=O(),h=N(),C=Z(),f=W({email:c().required("信箱為必填欄位").test("isEmail","信箱格式錯誤",d=>B.isEmail(d)),password:c().required("密碼為必填欄位").min(6,"密碼長度過短").max(20,"密碼長度過長")}),{handleSubmit:i,isSubmitting:y}=A({validationSchema:f}),g=p("email"),b=p("password"),S=i(async d=>{var u,m;try{const{data:V}=await x.post("/users/login",{email:d.email,password:d.password});C.login(V.result),h({text:"登入成功",showCloseButton:!1,snackbarProps:{timeout:2e3,color:"success",location:"bottom"}}),w.push("/account")}catch(V){const s=((m=(u=V==null?void 0:V.response)==null?void 0:u.data)==null?void 0:m.message)||"發生錯誤，請稍後再試";h({text:s,showCloseButton:!1,snackbarProps:{timeout:2e3,color:"error",location:"bottom"}})}});return(d,u)=>(I(),P(k,null,{default:l(()=>[e(E,null,{default:l(()=>[e(n,{col:"12"},{default:l(()=>[e(j,{disabled:a(y),onSubmit:T(a(S),["prevent"])},{default:l(()=>[e(v,{type:"email",color:"teal",class:"mb-2",label:"電子信箱",variant:"solo-filled",flat:"",rounded:"lg",modelValue:a(g).value.value,"onUpdate:modelValue":u[0]||(u[0]=m=>a(g).value.value=m),"error-messages":a(g).errorMessage.value},null,8,["modelValue","error-messages"]),e(v,{color:"teal",label:"密碼",variant:"solo-filled",flat:"",rounded:"lg",type:r.value?"text":"password","append-inner-icon":r.value?"mdi-eye":"mdi-eye-off","onClick:appendInner":u[1]||(u[1]=m=>r.value=!r.value),hint:"密碼長度：6 ~ 20 之間",minlength:"6",maxlength:"20",counter:"",modelValue:a(b).value.value,"onUpdate:modelValue":u[2]||(u[2]=m=>a(b).value.value=m),"error-messages":a(b).errorMessage.value},null,8,["type","append-inner-icon","modelValue","error-messages"]),e(ie,{label:"記住我的帳號",color:"teal"}),e(z,{type:"submit",color:"teal",block:"",rounded:"",size:"large",flat:""},{default:l(()=>[M("登入")]),_:1})]),_:1},8,["disabled","onSubmit"])]),_:1})]),_:1})]),_:1}))}};const ce=_=>(ee("data-v-88f17a0b"),_=_(),ae(),_),pe=ce(()=>le("div",{class:"bg"},null,-1)),fe={__name:"SetupView",setup(_){const r=R(2),x=()=>{r.value=2},{smAndUp:w}=J(),h=K(()=>w.value);return(C,f)=>(I(),Q(X,null,[pe,e(k,{class:q([h.value?"h-screen":"vh-100","d-flex align-center"])},{default:l(()=>[e(E,null,{default:l(()=>[e(n,{cols:"10",md:"5",offset:"1","offset-md":"7"},{default:l(()=>[e(se,{modelValue:r.value,"onUpdate:modelValue":f[0]||(f[0]=i=>r.value=i),color:"teal","fixed-tabs":"","align-tabs":"center"},{default:l(()=>[e(F,{value:1,rounded:"t-xl",class:q(r.value===1?"tab-white text-h6":"tab-grey")},{default:l(()=>[M("註冊")]),_:1},8,["class"]),e(F,{value:2,rounded:"t-xl",class:q(r.value===2?"tab-white text-h6":"tab-grey")},{default:l(()=>[M("登入")]),_:1},8,["class"])]),_:1},8,["modelValue"]),e(Y,{elevation:"4",rounded:"b-xl t-0",style:{background:"rgba(255, 255, 255, 0.6)"}},{default:l(()=>[e(oe,{modelValue:r.value,"onUpdate:modelValue":f[1]||(f[1]=i=>r.value=i)},{default:l(()=>[e($,{value:1},{default:l(()=>[e(k,{fluid:"",class:"mt-2"},{default:l(()=>[e(de,{onSubmitForm:x})]),_:1})]),_:1}),e($,{value:2},{default:l(()=>[e(k,{fluid:"",class:"mt-2"},{default:l(()=>[e(me)]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["class"])],64))}},Ue=H(fe,[["__scopeId","data-v-88f17a0b"]]);export{Ue as default};
