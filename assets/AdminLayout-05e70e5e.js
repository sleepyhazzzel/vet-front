import{p as A,l as D,g as L,f as S,h as r,aK as F,v as N,aL as M,c as B,C as z,I as q,L as G,q as J,z as K,t as f,Q,A as U,T as Z,J as T,aM as j,a8 as _,i as E,_ as H,a3 as u,a5 as p,a6 as c,ab as O,af as W,r as I,aN as X,a0 as Y,Z as ee,a2 as te,a4 as h,aa as w,V as ae,ar as re,a7 as x,a9 as R,au as ne}from"./index-407db2f2.js";import{V as se,a as ie}from"./VNavigationDrawer-739e382a.js";import{V as y,b as $,c as oe,d as le}from"./VList-d6f820cd.js";const ue=A({divider:[Number,String],...D()},"VBreadcrumbsDivider"),de=L()({name:"VBreadcrumbsDivider",props:ue(),setup(t,d){let{slots:e}=d;return S(()=>{var n;return r("li",{class:["v-breadcrumbs-divider",t.class],style:t.style},[((n=e==null?void 0:e.default)==null?void 0:n.call(e))??t.divider])}),{}}}),ce=A({active:Boolean,activeClass:String,activeColor:String,color:String,disabled:Boolean,title:String,...D(),...F(),...N({tag:"li"})},"VBreadcrumbsItem"),me=L()({name:"VBreadcrumbsItem",props:ce(),setup(t,d){let{slots:e,attrs:n}=d;const m=M(t,n),o=B(()=>{var l;return t.active||((l=m.isActive)==null?void 0:l.value)}),C=B(()=>o.value?t.activeColor:t.color),{textColorClasses:V,textColorStyles:i}=z(C);return S(()=>r(t.tag,{class:["v-breadcrumbs-item",{"v-breadcrumbs-item--active":o.value,"v-breadcrumbs-item--disabled":t.disabled,[`${t.activeClass}`]:o.value&&t.activeClass},V.value,t.class],style:[i.value,t.style],"aria-current":o.value?"page":void 0},{default:()=>{var l,v;return[m.isLink.value?r("a",{class:"v-breadcrumbs-item--link",href:m.href.value,"aria-current":o.value?"page":void 0,onClick:m.navigate},[((v=e.default)==null?void 0:v.call(e))??t.title]):((l=e.default)==null?void 0:l.call(e))??t.title]}})),{}}}),ve=A({activeClass:String,activeColor:String,bgColor:String,color:String,disabled:Boolean,divider:{type:String,default:"/"},icon:q,items:{type:Array,default:()=>[]},...D(),...G(),...J(),...N({tag:"ul"})},"VBreadcrumbs"),ge=L()({name:"VBreadcrumbs",props:ve(),setup(t,d){let{slots:e}=d;const{backgroundColorClasses:n,backgroundColorStyles:m}=K(f(t,"bgColor")),{densityClasses:o}=Q(t),{roundedClasses:C}=U(t);Z({VBreadcrumbsDivider:{divider:f(t,"divider")},VBreadcrumbsItem:{activeClass:f(t,"activeClass"),activeColor:f(t,"activeColor"),color:f(t,"color"),disabled:f(t,"disabled")}});const V=B(()=>t.items.map(i=>typeof i=="string"?{item:{title:i},raw:i}:{item:i,raw:i}));return S(()=>{const i=!!(e.prepend||t.icon);return r(t.tag,{class:["v-breadcrumbs",n.value,o.value,C.value,t.class],style:[m.value,t.style]},{default:()=>{var l;return[i&&r("li",{key:"prepend",class:"v-breadcrumbs__prepend"},[e.prepend?r(j,{key:"prepend-defaults",disabled:!t.icon,defaults:{VIcon:{icon:t.icon,start:!0}}},e.prepend):r(T,{key:"prepend-icon",start:!0,icon:t.icon},null)]),V.value.map((v,s,g)=>{var P;let{item:a,raw:b}=v;return r(_,null,[((P=e.item)==null?void 0:P.call(e,{item:a,index:s}))??r(me,E({key:s,disabled:s>=g.length-1},typeof a=="string"?{title:a}:a),{default:e.title?()=>{var k;return(k=e.title)==null?void 0:k.call(e,{item:a,index:s})}:void 0}),s<g.length-1&&r(de,null,{default:e.divider?()=>{var k;return(k=e.divider)==null?void 0:k.call(e,{item:b,index:s})}:void 0})])}),(l=e.default)==null?void 0:l.call(e)]}})}),{}}});const be={};function fe(t,d){return u(),p(ge,{items:t.$route.matched,class:"breadcrumbs"},{item:c(({item:e})=>[O(W(e.meta.name),1)]),divider:c(()=>[r(T,{icon:"mdi-chevron-right",size:"small"})]),_:1},8,["items"])}const pe=H(be,[["render",fe],["__scopeId","data-v-36fa699a"]]),ye={__name:"AdminLayout",setup(t){const d=I(!0),e=I(!1),n=X(),{apiAuth:m}=ne(),o=Y(),C=ee(),V=B(()=>`https://source.boringavatars.com/beam/120/${n.account}?colors=545454,7B8A84,B2DFDB,EDE7D5,B7CC18`),i=B(()=>[{to:"/admin",text:"管理員登入",show:!n.isAdminLogin,icon:"mdi-login-variant",group:!1},{text:"病歷管理",show:n.isAdminLogin,icon:"mdi-file-document-multiple-outline",group:!0,children:[{to:"/admin/medical-data/new",text:"新增病例",show:!0},{to:"/admin/medical-data",text:"病歷總覽",show:!0}]},{text:"掛號管理",show:n.isAdminLogin,icon:"mdi-calendar",group:!0,children:[{to:"/admin/appointment",text:"掛號資訊",show:!0},{to:"/admin/appointment/system",text:"掛號系統",show:!0}]},{to:"/admin/setting",text:"管理員設定",show:n.isAdminLogin,icon:"mdi-cog",group:!1}]),l=async()=>{var v,s;try{await m.delete("/admins/logout"),n.logout(),o({text:"登出成功",showCloseButton:!1,snackbarProps:{timeout:2e3,color:"success",location:"bottom"}}),C.push("/admin")}catch(g){const a=((s=(v=g==null?void 0:g.responce)==null?void 0:v.data)==null?void 0:s.message)||"發生錯誤，請稍後再試";o({text:a,showCloseButton:!1,snackbarProps:{timeout:2e3,color:"warning",location:"bottom"}})}};return(v,s)=>{const g=te("RouterView");return u(),h(_,null,[r(se,{theme:"dark",modelValue:d.value,"onUpdate:modelValue":s[1]||(s[1]=a=>d.value=a),rail:e.value,onClick:s[2]||(s[2]=a=>e.value=!1),permanent:""},{default:c(()=>[w(n).isAdminLogin?(u(),p($,{key:0},{default:c(()=>[r(y,{"prepend-avatar":V.value,title:w(n).account,subtitle:w(n).position},{append:c(()=>[r(ae,{variant:"text",icon:"mdi-chevron-left",onClick:s[0]||(s[0]=re(a=>e.value=!e.value,["stop"]))})]),_:1},8,["prepend-avatar","title","subtitle"])]),_:1})):x("",!0),r(oe),r($,{nav:""},{default:c(()=>[(u(!0),h(_,null,R(i.value,a=>(u(),h(_,{key:a},[a.show&&!a.group?(u(),p(y,{key:0,to:a.to,"prepend-icon":a.icon,title:a.text,exact:""},null,8,["to","prepend-icon","title"])):x("",!0),a.show&&a.group?(u(),p(le,{key:1},{activator:c(({props:b})=>[r(y,E(b,{"prepend-icon":a.icon,title:a.text,exact:""}),null,16,["prepend-icon","title"])]),default:c(()=>[(u(!0),h(_,null,R(a.children,b=>(u(),p(y,{key:b,to:b.to,title:b.text,exact:""},null,8,["to","title"]))),128))]),_:2},1024)):x("",!0)],64))),128)),w(n).isAdminLogin?(u(),p(y,{key:0,onClick:l,title:"登出","prepend-icon":"mdi-logout"})):x("",!0)]),_:1})]),_:1},8,["modelValue","rail"]),r(ie,{class:"bg-grey-lighten-2"},{default:c(()=>[r(pe),r(g)]),_:1})],64)}}};export{ye as default};
