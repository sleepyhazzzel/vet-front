import{r as n,a1 as h,Z as B,c as w,a4 as f,a5 as A,h as s,a7 as a,a6 as N,V as c,ad as i,a8 as T,a9 as $,ao as D,ar as I,ai as d,as as L,ab as S,aj as j}from"./index-fa1a0a70.js";import{V as z}from"./VDataTable-1e3b7ff8.js";const E={class:"text-center"},F=d("div",{class:"text-h6 mt-3 mb-8"},"確定取消預約掛號？",-1),P={class:"mb-3"},q={__name:"AppointTable",props:{id:String},setup(k){const u=k,o=n(!1),r=n(!0),m=n(""),p=n([]),{apiAuth:v}=j(),b=h(),V=B(),y=w(()=>V.meta.name.includes("病歷")?"mb-4 elevation-1":"pa-3"),g=[{title:"日期",key:"date"},{title:"時段",key:"time"},{title:"獸醫師",key:"doctor_name"},{title:"號碼",key:"order"},{title:"取消",key:"actions",align:"center",sortable:!1}],_=async t=>{try{r.value=!0;const{data:e}=await v.get(`/appointments/${t}`);p.value=e.result}catch(e){console.log(e)}r.value=!1};_(u.id);const x=async t=>{o.value=!0,m.value=t._id},C=async()=>{try{o.value=!1,await v.delete(`/appointments/${m.value}`),_(u.id),b({text:"取消成功",showCloseButton:!1,snackbarProps:{timeout:2e3,color:"success",location:"bottom"}})}catch(t){console.log(t)}};return(t,e)=>(f(),A(S,null,[s(z,{headers:g,"sort-by":[{key:"date",order:"desc"}],items:p.value,"items-per-page":10,loading:r.value,"no-data-text":"無掛號紀錄",class:$(y.value)},{"item.actions":a(({item:l})=>[l.status?T("",!0):(f(),N(c,{key:0,color:"teal",variant:"text",onClick:R=>x(l)},{default:a(()=>[i("取消 ")]),_:2},1032,["onClick"]))]),_:2},1032,["items","loading","class"]),s(L,{modelValue:o.value,"onUpdate:modelValue":e[1]||(e[1]=l=>o.value=l),"max-width":"300",persistent:""},{default:a(()=>[s(D,null,{default:a(()=>[s(I,null,{default:a(()=>[d("div",E,[F,d("div",P,[s(c,{color:"teal",class:"me-3",variant:"text",onClick:e[0]||(e[0]=l=>o.value=!1)},{default:a(()=>[i("取消 ")]),_:1}),s(c,{color:"teal",onClick:C},{default:a(()=>[i("確定 ")]),_:1})])])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};export{q as _};
